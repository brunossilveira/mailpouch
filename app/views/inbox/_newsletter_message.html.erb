<script>window.process = { env: {} }</script>
<%= link_to newsletter_message_path(newsletter_message), data: { turbo_frame: "newsletter_message" } do %>
  <div class="group relative rounded-md p-4 my-4 shadow hover:bg-amber-50 border border-gray-200">
    <div class="flex items-center space-x-1 justify-between">
      <h3 class="md:text-xl font-semibold text-gray-900">
        <%= newsletter_message.subject %>
      </h3>
      <% unless newsletter_message.read %>
        <div data-controller="popper">
          <div role="tooltip" data-popper-target="tooltip" class="inline-block invisible absolute z-10 py-2 px-3 text-sm font-medium text-white bg-gray-900 rounded-lg shadow-sm opacity-0 transition-opacity duration-300">
            Mark as Read
          </div>
          <%= link_to "", mark_as_read_path(newsletter_message.id), class: 'rounded-full bg-amber-600 flex w-3 h-3 hover:bg-amber-400', data: { :'popper-target' => 'element', action: 'mouseenter->popper#show mouseleave->popper#hide' } %>
        </div>
      <% end %>
    </div>
    <div class="mt-5 flex justify-between items-start">
      <div class="flex items-center space-x-2">
        <img class="w-6 h-6" src="https://unavatar.io/<%= newsletter_message.newsletter.email.split('@').last %>"></img>
        <p class=""><%= newsletter_message.newsletter.name %></p>
      </div>
      <span class="flex items-center text-gray-600 text-sm">
        <%= newsletter_message.created_at.strftime("%b %d") %>
      </span>
    </div>
  </div>
<% end %>
